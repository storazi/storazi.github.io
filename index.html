<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>경험치 계산기</title>
<style>
  :root{
    --bg:#0b1220; --panel:#121a2b; --soft:#1c2538; --ring:#24324b;
    --text:#eaf2ff; --muted:#a9b5cc; --accent:#6aa0ff;
    --ok:#36d17b; --warn:#ffbd4a; --bad:#ff6b81;
    --chip:#1a2233; --input:#0e1626;
  }
  *{box-sizing:border-box;transition:all .15s ease-in-out;}
  body{
    margin:0;background:var(--bg);color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,sans-serif;
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    min-height:100vh;padding:20px;gap:20px;
  }

  .wrapper{
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap:20px;
    width:100%;
    max-width:1100px;
  }

  .card{
    background:linear-gradient(180deg,#121a2b 0%,#0e1626 100%);
    border:1px solid var(--ring);border-radius:20px;
    padding:24px;box-shadow:0 10px 25px rgba(0,0,0,.3);
  }

  h2{text-align:center;margin-bottom:18px;font-size:clamp(18px,2vw,22px);}
  .row{display:grid;grid-template-columns:1fr;gap:6px;margin:10px 0;}
  label{color:var(--muted);font-size:clamp(13px,1.6vw,14px);}
  input{
    width:100%;background:var(--input);color:var(--text);
    border:1px solid var(--ring);border-radius:12px;
    padding:10px 12px;font-size:clamp(14px,1.7vw,15px);
  }
  .btn{
    background:linear-gradient(180deg,#6aa0ff,#3d76e6);
    color:#fff;border:none;border-radius:12px;
    padding:10px 14px;font-weight:700;cursor:pointer;
    font-size:clamp(14px,1.7vw,15px);
  }
  .btn.ghost{background:transparent;border:1px solid var(--ring);}
  .row.buttons{display:flex;justify-content:center;gap:10px;margin-top:14px;}
  .results{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:12px;margin-top:18px;
  }
  .stat{
    background:var(--soft);border:1px solid var(--ring);
    border-radius:14px;padding:12px;text-align:center;
  }
  .stat small{display:block;color:var(--muted);font-size:clamp(12px,1.5vw,13px);}
  .stat strong{display:block;margin-top:4px;font-size:clamp(16px,2vw,18px);}
  #visits{text-align:center;color:var(--muted);}
</style>
</head>
<body>

<div class="wrapper">
  <!-- ⬅ 왼쪽: 레벨업 계산기 -->
  <div class="card">
    <h2>레벨업 계산기</h2>
    <div class="row"><label>현재 레벨</label><input id="currentLevel" type="number" /></div>
    <div class="row"><label>현재 진행도(%)</label><input id="currentPercent" type="number" min="0" max="100" placeholder="예: 45" /></div>
    <div class="row"><label>목표 레벨</label><input id="targetLevel" type="number"/></div>
    <div class="row"><label>시간당 획득 경험치</label><input id="xpPerHour" type="number" /></div>
    <div class="row buttons">
      <button class="btn" id="run">계산</button>
      <button class="btn ghost" id="reset">초기화</button>
    </div>
    <div class="results" id="results" hidden>
      <div class="stat"><small>남은 경험치</small><strong id="statRemain">-</strong></div>
      <div class="stat"><small>예상 시간</small><strong id="statHours">-</strong></div>
      <div class="stat"><small>예상 일수</small><strong id="statDays">-</strong></div>
    </div>
  </div>

  <!-- ➡ 오른쪽: 시간당 경험치 계산기 -->
  <div class="card">
    <h2>시간당 경험치 계산기</h2>
    <div class="row"><label>시작 경험치</label><input id="startXP" type="number" /></div>
    <div class="row"><label>종료 경험치</label><input id="endXP" type="number" /></div>
    <div class="row"><label>경과 시간(초 단위)</label><input id="elapsedSec" type="number" /></div>
    <div class="row buttons"><button class="btn" id="calcRate">계산</button></div>
    <div class="results" id="rateResult" hidden>
      <div class="stat"><small>시간당 경험치</small><strong id="statRate">-</strong></div>
    </div>
  </div>
</div>

<!-- 🌙 방문자수 표시 -->
<div id="visits">총 방문자
<br><br>
<img src="https://hits.sh/storazi.github.io.svg?style=for-the-badge&label=visits&color=007ec6" alt="Hits">
</div>
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const $ = s=>document.querySelector(s);
  const fmt = n=>isFinite(n)?Number(n).toLocaleString():'-';

  // 📘 경험치 테이블
  const EXP_TABLE = {
    0:0,1:2,2:6,3:17,4:37,5:67,6:111,7:169,8:247,9:344,10:464,11:609,12:783,13:985,14:1221,
    15:1491,16:1799,17:2145,18:2535,19:2968,20:3448,21:3977,22:4559,23:5193,24:5885,25:6635,
    26:7447,27:8321,28:9263,29:10272,30:11352,31:12506,32:13734,33:15042,34:16429,35:17899,
    36:19454,37:21098,38:22830,39:24656,40:26576,41:28594,42:30710,43:32930,44:35253,45:37683,
    46:40222,47:42874,48:45638,49:48520,50:51520,51:54642,52:57886,53:61258,54:64757,55:68387,
    56:72150,57:76050,58:80086,59:84264,60:106110,61:113412,62:121149,63:129352,64:138044,
    65:147256,66:157019,67:167366,68:178334,69:189958,70:202282,71:215348,72:229205,73:243901,
    74:259495,75:276041,76:293606,77:312258,78:332071,79:353126,80:375511,81:399318,82:424655,
    83:451631,84:480370,85:511007,86:543686,87:578571,88:616838,89:655680,90:698312,91:743970,
    92:795918,93:842442,94:901869,95:962553,96:1026899,97:1098354,98:1174419,99:1256664,
    100:1407463,101:1576358,102:1765521,103:1977384,104:2214670,105:2480430,106:2778082,
    107:3111451,108:3484825,109:3903005,110:4371365,111:4895929,112:5483440,113:6141453,
    114:6878428,115:7703839,116:8628300,117:9663695,118:10823339,119:12122140,120:13576796,
    121:15206012,122:17030733,123:19074421,124:21363352,125:23926954,126:26798189,127:30013971,
    128:33615648,129:37649526,130:42167469,131:47227565,132:52894873,133:59242257,134:66351328,
    135:74313488,136:83231106,137:93218839,138:104405100,139:116933712
  };

  const getTotalExp = (start, target)=>{
    let sum=0;
    for(let lv=start; lv<target; lv++){
      if(EXP_TABLE[lv]) sum += EXP_TABLE[lv];
      else throw new Error(`레벨 ${lv} 데이터 없음`);
    }
    return sum;
  };

  // 레벨업 계산
  $('#run').addEventListener('click',()=>{
    try{
      const currLv = Number($('#currentLevel').value);
      const currPct = Number($('#currentPercent').value)||0;
      const targetLv = Number($('#targetLevel').value);
      const perHour = Number($('#xpPerHour').value);
      if(!currLv||!targetLv||!perHour)
        throw new Error('레벨과 시간당 경험치를 모두 입력하세요.');
      if(targetLv<=currLv)
        throw new Error('목표 레벨은 현재보다 커야 합니다.');

      const remainFromCurr = EXP_TABLE[currLv]*(1-(currPct/100));
      const remainAfterCurr = getTotalExp(currLv+1,targetLv);
      const remain = remainFromCurr + remainAfterCurr;

      const hours = remain / perHour;
      const days = hours / 24;
      const h = Math.floor(hours);
      const m = Math.round((hours - h) * 60);

      $('#statRemain').textContent = fmt(remain.toFixed(0));
      $('#statHours').textContent = `${h}시간 ${m}분`;
      $('#statDays').textContent = days.toFixed(2)+' 일';
      $('#results').hidden = false;
    }catch(e){alert(e.message);}
  });

  $('#reset').addEventListener('click',()=>{
    document.querySelectorAll('input').forEach(i=>i.value='');
    $('#results').hidden=true;$('#rateResult').hidden=true;
  });

  // 시간당 경험치 계산
  $('#calcRate').addEventListener('click',()=>{
    try{
      const start=Number($('#startXP').value);
      const end=Number($('#endXP').value);
      const sec=Number($('#elapsedSec').value);
      if(!start||!end||!sec) throw new Error("시작, 종료 경험치와 시간을 모두 입력하세요.");
      const gained=end-start;
      const rate=(gained/sec)*3600;
      $('#statRate').textContent=fmt(rate.toFixed(0));
      $('#rateResult').hidden=false;
    }catch(e){alert(e.message);}
  });

  // 🌙 방문자 카운터
  const NAMESPACE = 'storazi-github-io';
  const KEY = 'total-visits';
  const FLAG = 'counted:' + KEY;

  (async () => {
    const shouldCount = !sessionStorage.getItem(FLAG);
    const url = `https://api.countapi.xyz/${shouldCount ? 'hit' : 'get'}/${NAMESPACE}/${KEY}`;
    const res = await fetch(url);
    const data = await res.json();
    document.getElementById('visits').textContent =
      `총 방문자: ${data.value.toLocaleString()}`;
    if (shouldCount) sessionStorage.setItem(FLAG, '1');
  })();

});
</script>
</body>
</html>
