<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ğŸ‚ ë¯¸ê¶ </title>
<style>
  :root {
    --bg:#0b1426; --panel:#121a2b; --accent:#ffd447;
    --text:#eaf2ff; --muted:#a9b5cc;
    --blue:#3ba4f7; --red:#ff6b81;
  }

  body {
    background:var(--bg); color:var(--text);
    font-family:"Pretendard",system-ui,-apple-system,Segoe UI,sans-serif;
    margin:0; display:flex; flex-direction:column; align-items:center;
    padding:20px;
  }

  h1 {
    color:var(--accent);
    font-size:1.6rem;
    margin-bottom:10px;
    text-align:center;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tab-buttons {
    display:flex; justify-content:center; gap:10px; margin-bottom:20px;
  }
  .tab-buttons button {
    background:var(--panel);
    border:1px solid var(--accent);
    color:var(--accent);
    font-weight:700;
    padding:8px 18px;
    border-radius:10px;
    cursor:pointer;
    transition:all 0.2s ease;
  }
  .tab-buttons button.active {
    background:var(--accent);
    color:#111;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ íƒ­ ì½˜í…ì¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tab-content { display:none; width:min(1100px,96%); }
  .tab-content.active { display:block; }

  .card {
    background:var(--panel);
    border:1px solid var(--accent);
    border-radius:16px;
    padding:20px;
    box-shadow:0 0 14px rgba(255,212,71,.2);
  }

  /* ğŸŸ¦ ê¸°ë³¸ ì…ë ¥ì°½ (ê²½í—˜ì¹˜ ê³„ì‚°ê¸°ìš©) */
  input[type="number"] {
    width:100%;
    padding:10px 12px;
    border:1px solid #3ba4f7;
    border-radius:10px;
    background:rgba(20,30,50,0.8);
    color:#eaf2ff;
    font-size:15px;
    margin-bottom:10px;
    outline:none;
    transition:all 0.25s ease-in-out;
    backdrop-filter:blur(6px);
  }
  input[type="number"]::placeholder {
    color:#8fb9ff; opacity:0.8;
  }
  input[type="number"]:focus {
    border-color:#6aa0ff;
    box-shadow:0 0 10px rgba(58,164,247,0.6);
    background:rgba(25,40,70,0.85);
  }

  /* ğŸŸ© í« ì´ë¦„ ì…ë ¥ì°½ ì „ìš© (í•­ìƒ ê¸€ë¡œìš° + ë°˜ì‘í˜• ê¸¸ì´ + ì•„ì´ì½˜ í¬í•¨) */
  #petName {
    width:min(480px,90%);
    display:block;
    margin:0 auto 14px auto;
    padding:14px 16px 14px 40px;
    border:1px solid #6aa0ff;
    border-radius:14px;
    background:rgba(25,40,70,0.9);
    color:#eaf2ff;
    font-size:15px;
    outline:none;
    backdrop-filter:blur(8px);
    box-shadow:0 0 10px rgba(58,164,247,0.6);
    background-image:url('data:image/svg+xml;utf8,<svg fill="%23a8c9ff" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/></svg>');
    background-repeat:no-repeat;
    background-position:12px center;
    background-size:18px;
    transition:all 0.25s ease-in-out;
  }
  #petName::placeholder {
    color:#a8c9ff; opacity:0.9;
  }
  #petName:hover {
    border-color:#8fc5ff;
    box-shadow:0 0 14px rgba(80,180,255,0.75);
  }

  /* ë²„íŠ¼ ê³µí†µ */
  button.sim, .btn {
    background:var(--accent);
    color:#111;
    font-weight:700;
    border:none;
    border-radius:10px;
    padding:10px 14px;
    cursor:pointer;
    margin:5px;
    transition:all .15s ease-in-out;
  }
  button.sim:hover, .btn:hover {
    filter:brightness(1.1);
  }

  .panel {
    background:#0e1828;
    border-radius:10px;
    padding:10px;
    margin-top:10px;
    font-size:14px;
    line-height:1.6;
  }
  .hr { border-bottom:1px dashed var(--accent); margin:8px 0; }
  .result {
    white-space:pre-line;
    font-family:"JetBrains Mono","Courier New",monospace;
    font-size:14px;
    margin-top:15px;
  }

  /* ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸° */
  .wrapper {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
    gap:20px;
    width:100%;
    max-width:1100px;
  }
  .card.exp {
    background:linear-gradient(180deg,#121a2b 0%,#0e1626 100%);
    border:1px solid #24324b;
    border-radius:20px;
    padding:24px;
  }
  h2 {
    text-align:center;
    margin-bottom:18px;
    font-size:20px;
    color:var(--accent);
  }
  .row { display:grid;grid-template-columns:1fr;gap:6px;margin:10px 0; }
  label { color:var(--muted);font-weight:600; }
  .results {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:12px;
    margin-top:18px;
  }
  .stat {
    background:#1c2538;
    border:1px solid #24324b;
    border-radius:14px;
    padding:12px;
    text-align:center;
  }
  .stat small { display:block;color:var(--muted); }
  .stat strong { display:block;margin-top:4px;font-size:16px; }
</style>
</head>
<body>
<h1>ğŸ‚ ì´ˆêµ¬ ì‹œë®¬ë ˆì´í„° ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸°</h1>

<div class="tab-buttons">
  <button class="active" onclick="showTab('simTab', this)">ğŸ‚ ì´ˆêµ¬ ì‹œë®¬ë ˆì´í„°</button>
  <button onclick="showTab('expTab', this)">ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸°</button>
</div>

<!-- ğŸ‚ ì´ˆê¸°í™” ì‹œë®¬ë ˆì´í„° -->
<div id="simTab" class="tab-content active">
  <div class="card">
    <input id="petName" placeholder="ğŸ” í« ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (ì •í™•íˆ ì¼ì¹˜)">
    <div id="sgrade" class="panel">í«ì„ ì„ íƒí•˜ë©´ Sê¸‰ ê¸°ì¤€ ë° ëœë¤ ì¶œë ¥ì´ ì¤€ë¹„ë©ë‹ˆë‹¤.</div>
    <div style="text-align:center;">
      <button class="sim" onclick="simulate(1)">ğŸ” ì´ˆê¸°í™” 1íšŒ</button>
      <button class="sim" onclick="simulate(5)">ğŸ’« ì´ˆê¸°í™” 5íšŒ</button>
      <button class="sim" onclick="clearResults()">ğŸ§¹ ê²°ê³¼ ì§€ìš°ê¸°</button>
    </div>
    <div id="result" class="result"></div>
  </div>
</div>

<!-- ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸° -->
<div id="expTab" class="tab-content">
  <div class="wrapper">
    <div class="card exp">
      <h2>ë ˆë²¨ì—… ê³„ì‚°ê¸°</h2>
      <div class="row"><label>í˜„ì¬ ë ˆë²¨</label><input id="currentLevel" type="number"></div>
      <div class="row"><label>í˜„ì¬ ì§„í–‰ë„(%)</label><input id="currentPercent" type="number" placeholder="ì˜ˆ: 45"></div>
      <div class="row"><label>ëª©í‘œ ë ˆë²¨</label><input id="targetLevel" type="number"></div>
      <div class="row"><label>ì‹œê°„ë‹¹ íšë“ ê²½í—˜ì¹˜</label><input id="xpPerHour" type="number"></div>
      <div class="row"><button class="btn" id="run">ê³„ì‚°</button><button class="btn" id="reset">ì´ˆê¸°í™”</button></div>
      <div class="results" id="results" hidden>
        <div class="stat"><small>ë‚¨ì€ ê²½í—˜ì¹˜</small><strong id="statRemain">-</strong></div>
        <div class="stat"><small>ì˜ˆìƒ ì‹œê°„</small><strong id="statHours">-</strong></div>
        <div class="stat"><small>ì˜ˆìƒ ì¼ìˆ˜</small><strong id="statDays">-</strong></div>
      </div>
    </div>

    <div class="card exp">
      <h2>ì‹œê°„ë‹¹ ê²½í—˜ì¹˜ ê³„ì‚°ê¸°</h2>
      <div class="row"><label>ì‹œì‘ ê²½í—˜ì¹˜</label><input id="startXP" type="number"></div>
      <div class="row"><label>ì¢…ë£Œ ê²½í—˜ì¹˜</label><input id="endXP" type="number"></div>
      <div class="row"><label>ê²½ê³¼ ì‹œê°„(ì´ˆ ë‹¨ìœ„)</label><input id="elapsedSec" type="number"></div>
      <div class="row"><button class="btn" id="calcRate">ê³„ì‚°</button></div>
      <div class="results" id="rateResult" hidden>
        <div class="stat"><small>ì‹œê°„ë‹¹ ê²½í—˜ì¹˜</small><strong id="statRate">-</strong></div>
      </div>
    </div>
  </div>
</div>

<script>
function showTab(id, btn){
  document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.tab-buttons button').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

// ğŸ‚ ì´ˆê¸°í™” ì‹œë®¬ë ˆì´í„°
//â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ§¬ í« ë°ì´í„° (Sê¸‰ ê¸°ì¤€ ëŠ¥ë ¥ì¹˜ â€” csvjson.json ë³€í™˜ë³¸)
//â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const petData = [
  {"ì´ë¦„":"ìš°ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":16,"ê³µê²©ë ¥(Atk)":2,"ë°©ì–´ë ¥(Def)":2,"ìˆœë°œë ¥(Agi)":2}},
  {"ì´ë¦„":"ë‘ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":35,"ê³µê²©ë ¥(Atk)":6,"ë°©ì–´ë ¥(Def)":4,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"ì–¼ë£©ìš°ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":25,"ê³µê²©ë ¥(Atk)":4,"ë°©ì–´ë ¥(Def)":4,"ìˆœë°œë ¥(Agi)":3}},
  {"ì´ë¦„":"ì‹¤ë²„ìš°ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":38,"ê³µê²©ë ¥(Atk)":7,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":6}},
  {"ì´ë¦„":"ë¶ˆê·¸ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":20,"ê³µê²©ë ¥(Atk)":3,"ë°©ì–´ë ¥(Def)":3,"ìˆœë°œë ¥(Agi)":4}},
  {"ì´ë¦„":"ë¶€ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":37,"ê³µê²©ë ¥(Atk)":4,"ë°©ì–´ë ¥(Def)":4,"ìˆœë°œë ¥(Agi)":2}},
  {"ì´ë¦„":"ê³¨ë“œë¶€ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":54,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":10,"ìˆœë°œë ¥(Agi)":4}},
  {"ì´ë¦„":"ë¶€ì´","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":56,"ê³µê²©ë ¥(Atk)":7,"ë°©ì–´ë ¥(Def)":6,"ìˆœë°œë ¥(Agi)":3}},
  {"ì´ë¦„":"ë¶€ì´ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":34,"ê³µê²©ë ¥(Atk)":5,"ë°©ì–´ë ¥(Def)":4,"ìˆœë°œë ¥(Agi)":3}},
  {"ì´ë¦„":"ì–¼ë£©ë¶€ì´ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":49,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":6,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"ê¼¬ë¯¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":41,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":5,"ìˆœë°œë ¥(Agi)":6}},
  {"ì´ë¦„":"ê¼¬ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":41,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":6,"ìˆœë°œë ¥(Agi)":6}},
  {"ì´ë¦„":"ê¼¬ë¹„ì˜¤","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":41,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":5,"ìˆœë°œë ¥(Agi)":7}},
  {"ì´ë¦„":"ê¼¬ê¼¬ë¹„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":41,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":5,"ìˆœë°œë ¥(Agi)":7}},
  {"ì´ë¦„":"í‘¸í‘¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":21,"ê³µê²©ë ¥(Atk)":3,"ë°©ì–´ë ¥(Def)":2,"ìˆœë°œë ¥(Agi)":4}},
  {"ì´ë¦„":"ìš°í‘¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":24,"ê³µê²©ë ¥(Atk)":4,"ë°©ì–´ë ¥(Def)":2,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"íˆ¬íˆ¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":30,"ê³µê²©ë ¥(Atk)":5,"ë°©ì–´ë ¥(Def)":3,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"ì˜¤íˆ¬íˆ¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":35,"ê³µê²©ë ¥(Atk)":5,"ë°©ì–´ë ¥(Def)":5,"ìˆœë°œë ¥(Agi)":6}},
  {"ì´ë¦„":"ë² ë¡œí¬ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":53,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":10,"ìˆœë°œë ¥(Agi)":4}},
  {"ì´ë¦„":"ì•„ê³ ì•„","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":42,"ê³µê²©ë ¥(Atk)":10,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":4}},
  {"ì´ë¦„":"ë¦¬ë¹„ë…¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":53,"ê³µê²©ë ¥(Atk)":12,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"ë°˜ê¸°ë…¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":52,"ê³µê²©ë ¥(Atk)":12,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":6}},
  {"ì´ë¦„":"ì¹´ë¹„íŠ¸","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":27,"ê³µê²©ë ¥(Atk)":5,"ë°©ì–´ë ¥(Def)":5,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"í¬ì´ë¹„ìŠ¤","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":54,"ê³µê²©ë ¥(Atk)":11,"ë°©ì–´ë ¥(Def)":8,"ìˆœë°œë ¥(Agi)":8}},
  {"ì´ë¦„":"ìŠ¤í† ë¼ì§€","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":50,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"ì•„í† ë¼ì§€","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":52,"ê³µê²©ë ¥(Atk)":8,"ë°©ì–´ë ¥(Def)":7,"ìˆœë°œë ¥(Agi)":5}},
  {"ì´ë¦„":"í™˜ìƒì–¼ë£©ìš°ë¦¬","ì´ˆê¸°ì¹˜(stat)":{"ë‚´êµ¬ë ¥(HP)":56,"ê³µê²©ë ¥(Atk)":9,"ë°©ì–´ë ¥(Def)":9,"ìˆœë°œë ¥(Agi)":7}}
];


function getPet(n){return petData.find(p=>p.ì´ë¦„===n);}
function oneRandomStats(b){
  const r=()=>Math.random()*0.30-0.15;
  return{
    HP:Math.round(b.HP*(1+r())),
    Atk:Math.round(b.Atk*(1+r())),
    Def:Math.round(b.Def*(1+r())),
    Agi:Math.round(b.Agi*(1+r()))
  };
}
function fmt(v,b){
  const d=v-b;
  if(d>0)return`${v}<b style="color:var(--red)">(+${d})</b>`;
  if(d<0)return`${v}<b style="color:var(--blue)">(${d})</b>`;
  return`${v}<b style="color:var(--muted)">(0)</b>`;
}
const nameInput=document.getElementById("petName");
const sgradeBox=document.getElementById("sgrade");
const resultBox=document.getElementById("result");
let currentBase=null;

nameInput.addEventListener("change",()=>{
  const n=nameInput.value.trim();
  const p=getPet(n);
  resultBox.textContent="";
  if(!p){
    currentBase=null;
    sgradeBox.innerHTML=`<b style="color:#ff6b81">âš ï¸ [${n}] ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</b>`;
    return;
  }
  const s=p["ì´ˆê¸°ì¹˜(stat)"];
  currentBase={HP:s["ë‚´êµ¬ë ¥(HP)"],Atk:s["ê³µê²©ë ¥(Atk)"],Def:s["ë°©ì–´ë ¥(Def)"],Agi:s["ìˆœë°œë ¥(Agi)"]};
  sgradeBox.innerHTML=`<b>${p.ì´ë¦„} Sê¸‰ ê¸°ì¤€ ëŠ¥ë ¥ì¹˜</b><div class="hr"></div>
    HP <b>${currentBase.HP}</b> | Atk <b>${currentBase.Atk}</b> |
    Def <b>${currentBase.Def}</b> | Agi <b>${currentBase.Agi}</b><br>
    <span style="color:#a9b5cc">ë²„íŠ¼ì„ ëˆŒëŸ¬ ëœë¤ ì´ˆê¸°í™” ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</span>`;
});
function simulate(t=1){
  if(!currentBase)return alert("ë¨¼ì € í« ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.");
  let o="";
  for(let i=1;i<=t;i++){
    const x=oneRandomStats(currentBase);
    o+=`#${i}  HP ${fmt(x.HP,currentBase.HP)} | Atk ${fmt(x.Atk,currentBase.Atk)} | Def ${fmt(x.Def,currentBase.Def)} | Agi ${fmt(x.Agi,currentBase.Agi)}\n`;
  }
  resultBox.innerHTML+=o+"<br>";
}
function clearResults(){resultBox.innerHTML="";}

// ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸°
const $=s=>document.querySelector(s);
const fmtNum=n=>isFinite(n)?Number(n).toLocaleString():'-';
const EXP_TABLE={
  0:0,1:2,2:6,3:17,4:37,5:67,6:111,7:169,8:247,9:344,10:464,11:609,12:783,13:985,14:1221,15:1491,
  16:1799,17:2145,18:2535,19:2968,20:3448,21:3977,22:4559,23:5193,24:5885,25:6635,26:7447,27:8321,
  28:9263,29:10272,30:11352,31:12506,32:13734,33:15042,34:16429,35:17899,36:19454,37:21098,38:22830,
  39:24656,40:26576,41:28594,42:30710,43:32930,44:35253,45:37683,46:40222,47:42874,48:45638,49:48520,
  50:51520,51:54642,52:57886,53:61258,54:64757,55:68387,56:72150,57:76050,58:80086,59:84264,60:106110,
  61:113412,62:121149,63:129352,64:138044,65:147256,66:157019,67:167366,68:178334,69:189958,70:202282,
  71:215348,72:229205,73:243901,74:259495,75:276041,76:293606,77:312258,78:332071,79:353126,80:375511,
  81:399318,82:424655,83:451631,84:480370,85:511007,86:543686,87:578571,88:616838,89:655680,90:698312,
  91:743970,92:795918,93:842442,94:901869,95:962553,96:1026899,97:1098354,98:1174419,99:1256664,
  100:1407463,101:1576358,102:1765521,103:1977384,104:2214670,105:2480430,106:2778082,107:3111451,
  108:3484825,109:3903005,110:4371365,111:4895929,112:5483440,113:6141453,114:6878428,115:7703839,
  116:8628300,117:9663695,118:10823339,119:12122140,120:13576796,121:15206012,122:17030733,123:19074421,
  124:21363352,125:23926954,126:  23926954,126:26798189,127:30013971,128:33615648,129:37649526,130:42167469,131:47227565,
  132:52894873,133:59242257,134:66351328,135:74313488,136:83231106,137:93218839,
  138:104405100,139:116933712
};

function getTotalExp(s,t){
  let sum=0;
  for(let lv=s;lv<t;lv++){
    if(EXP_TABLE[lv]) sum+=EXP_TABLE[lv];
    else break;
  }
  return sum;
}

$('#run').addEventListener('click',()=>{
  try{
    const c=+$('#currentLevel').value,
          cp=+($('#currentPercent').value)||0,
          t=+$('#targetLevel').value,
          ph=+$('#xpPerHour').value;
    if(!c||!t||!ph) throw new Error('ì…ë ¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.');
    if(t<=c) throw new Error('ëª©í‘œ ë ˆë²¨ì€ í˜„ì¬ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.');

    const rem1 = EXP_TABLE[c]*(1-(cp/100));
    const rem2 = getTotalExp(c+1,t);
    const remain = rem1 + rem2;

    const hrs = remain / ph;
    const days = hrs / 24;
    const h = Math.floor(hrs);
    const m = Math.round((hrs - h) * 60);

    $('#statRemain').textContent = fmtNum(remain.toFixed(0));
    $('#statHours').textContent = `${h}ì‹œê°„ ${m}ë¶„`;
    $('#statDays').textContent = days.toFixed(2)+' ì¼';
    $('#results').hidden = false;
  }catch(e){ alert(e.message); }
});

$('#reset').addEventListener('click',()=>{
  document.querySelectorAll('#expTab input').forEach(i=>i.value='');
  $('#results').hidden=true;
  $('#rateResult').hidden=true;
});

$('#calcRate').addEventListener('click',()=>{
  try{
    const s = +$('#startXP').value,
          e = +$('#endXP').value,
          sec = +$('#elapsedSec').value;
    if(!s||!e||!sec) throw new Error('ì…ë ¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.');

    const g = e - s;
    const rate = (g / sec) * 3600;

    $('#statRate').textContent = fmtNum(rate.toFixed(0));
    $('#rateResult').hidden = false;
  }catch(e){ alert(e.message); }
});
</script>
</body>
</html>

