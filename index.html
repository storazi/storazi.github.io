<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ê²½í—˜ì¹˜ & 8ë“±ê¸‰ í™•ë¥  ê³„ì‚°ê¸°</title>
<style>
:root{
  --bg:#0b1220; --panel:#121a2b; --soft:#1c2538; --ring:#24324b;
  --text:#eaf2ff; --muted:#a9b5cc; --accent:#6aa0ff;
  --ok:#36d17b; --warn:#ffbd4a; --bad:#ff6b81;
}
*{box-sizing:border-box;transition:all .15s ease-in-out;}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,Apple SD Gothic Neo,sans-serif;
  display:flex;flex-direction:column;align-items:center;padding:20px;
}
h1,h2{color:var(--accent);margin:10px 0;}
.panel{
  background:var(--panel);border:1px solid var(--ring);border-radius:12px;
  padding:20px;margin:10px 0;width:90%;max-width:600px;
}
label{display:inline-block;width:120px;color:var(--muted);}
input{
  width:100px;padding:6px;background:var(--soft);border:1px solid var(--ring);
  border-radius:6px;color:var(--text);margin:2px 0;
}
button{
  margin-top:10px;padding:8px 16px;background:var(--accent);
  color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;
}
button:hover{filter:brightness(1.2);}
.result{margin-top:10px;color:var(--ok);font-weight:600;}
.combo-box{
  background:var(--panel);border:1px solid var(--ring);
  border-radius:12px;padding:12px;margin-bottom:10px;
}
.combo-box span{display:inline-block;margin-right:8px;}
.muted{color:var(--muted);}
.prob{color:var(--ok);font-weight:600;}
hr{border:none;border-top:1px solid var(--ring);margin:25px 0;width:90%;}
</style>
</head>
<body>

<h1>âš”ï¸ ê²½í—˜ì¹˜ & 8ë“±ê¸‰ í™•ë¥  ê³„ì‚°ê¸°</h1>

<!-- ê²½í—˜ì¹˜ ê³„ì‚°ê¸° -->
<div class="panel">
  <h2>ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚°ê¸°</h2>
  <label>í˜„ì¬ ë ˆë²¨</label><input id="curLv" type="number" value="1"><br>
  <label>ëª©í‘œ ë ˆë²¨</label><input id="targetLv" type="number" value="30"><br>
  <label>ì „íˆ¬ë‹¹ ê²½í—˜ì¹˜</label><input id="expPerBattle" type="number" value="120"><br>
  <label>ë¶„ë‹¹ ì „íˆ¬ íšŸìˆ˜</label><input id="battlesPerMin" type="number" value="2"><br>
  <button id="calcExpBtn">ê²½í—˜ì¹˜ ê³„ì‚°</button>
  <div id="expResult" class="result"></div>
</div>

<hr>

<!-- 8ë“±ê¸‰ í™•ë¥  ê³„ì‚°ê¸° -->
<div class="panel">
  <h2>ğŸ¯ 8ë“±ê¸‰ í™•ë¥  ê³„ì‚°ê¸°</h2>
  <div id="probOutput"></div>
</div>

<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ğŸ“˜ ê²½í—˜ì¹˜ ê³„ì‚° ë¡œì§
   (ê°„ë‹¨í•œ ì§€ìˆ˜ ì„±ì¥ì‹: Lv^3 * 10)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function expForLevel(lv){ return Math.pow(lv,3)*10; }

function calcExp(){
  const curLv = parseInt(document.getElementById('curLv').value);
  const targetLv = parseInt(document.getElementById('targetLv').value);
  const expPerBattle = parseInt(document.getElementById('expPerBattle').value);
  const battlesPerMin = parseInt(document.getElementById('battlesPerMin').value);

  if(targetLv <= curLv){
    document.getElementById('expResult').innerText = 'ëª©í‘œ ë ˆë²¨ì€ í˜„ì¬ë³´ë‹¤ ë†’ì•„ì•¼ í•©ë‹ˆë‹¤.';
    return;
  }

  const needExp = expForLevel(targetLv) - expForLevel(curLv);
  const needBattles = Math.ceil(needExp / expPerBattle);
  const needMinutes = needBattles / battlesPerMin;
  const hours = Math.floor(needMinutes / 60);
  const minutes = Math.round(needMinutes % 60);

  document.getElementById('expResult').innerHTML = `
    í•„ìš” ê²½í—˜ì¹˜: ${needExp.toLocaleString()}<br>
    ì˜ˆìƒ ì „íˆ¬ ìˆ˜: ${needBattles.toLocaleString()}íšŒ<br>
    ì˜ˆìƒ ì†Œìš” ì‹œê°„: ${hours}ì‹œê°„ ${minutes}ë¶„
  `;
}
document.getElementById('calcExpBtn').addEventListener('click', calcExp);

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ğŸ¯ 8ë“±ê¸‰ í™•ë¥  ê³„ì‚° ë¡œì§
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const combos = [
  {hp:47, atk:12, def:7, agi:4, total:380, grade8:57},
  {hp:45, atk:13, def:6, agi:5, total:410, grade8:46},
  {hp:45, atk:12, def:7, agi:4, total:395, grade8:42},
  {hp:47, atk:11, def:7, agi:5, total:365, grade8:39},
  {hp:47, atk:13, def:7, agi:4, total:402, grade8:71},
];

function getGlobalStats(list){
  let totalAll = 0, grade8All = 0;
  list.forEach(d=>{
    totalAll += d.total;
    grade8All += d.grade8;
  });
  return { totalAll, grade8All };
}

function calcComboRates(list){
  const global = getGlobalStats(list);
  return list.map(c=>{
    const localRate = c.total ? c.grade8 / c.total : 0;
    const globalRate = global.totalAll ? c.grade8 / global.totalAll : 0;
    return {
      ...c,
      localRate: (localRate*100).toFixed(2)+'%',
      globalRate: (globalRate*100).toFixed(3)+'%',
    };
  });
}

function renderProb(){
  const rows = calcComboRates(combos);
  const global = getGlobalStats(combos);
  const out = document.getElementById('probOutput');
  out.innerHTML = `
    <div class="muted">ì „ì²´ ê²½ìš°ì˜ ìˆ˜: <b>${global.totalAll.toLocaleString()}</b> |
    ì „ì²´ 8ë“±ê¸‰ ì¼€ì´ìŠ¤: <b>${global.grade8All.toLocaleString()}</b></div><br>
  `;
  rows.forEach((r,i)=>{
    out.innerHTML += `
      <div class="combo-box">
        <div>#${i+1}</div>
        <div>
          <span>ì²´ë ¥: ${r.hp}</span>
          <span>ê³µê²©ë ¥: ${r.atk}</span>
          <span>ë°©ì–´ë ¥: ${r.def}</span>
          <span>ìˆœë°œë ¥: ${r.agi}</span>
        </div>
        <div class="muted">
          ì¡°í•© ë‚´ ê²½ìš°ì˜ ìˆ˜: ${r.total.toLocaleString()} /
          8ë“±ê¸‰: ${r.grade8.toLocaleString()}
        </div>
        <div>
          â–¶ ì¡°í•©ë³„ 8ë“±ê¸‰ í™•ë¥ : <span class="prob">${r.localRate}</span><br>
          â–¶ ì „ì²´ ëŒ€ë¹„ ë¹„ì¤‘: <span class="prob">${r.globalRate}</span>
        </div>
      </div>`;
  });
}
renderProb();
</script>
</body>
</html>
